knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(jsonlite)
library(tidyr)
library(stringr)
library(dplyr)
library(ggthemes)
library(langcog)
# Data pre-processing
files <- dir("../../pilot_1_raw_data/production-results")
raw_data <- data_frame()
for (f in files) {
jf <- paste("../../pilot_1_raw_data/production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- as_data_frame(jd$answers$data$data) %>%
mutate(workerid = jd$WorkerId)
raw_data <- bind_rows(raw_data, id)
}
data <- raw_data %>%
mutate(correct_target3 = ifelse(correct_target1 == 0 & correct_target2 == 0, 1, 0)) %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)")),
pick = ifelse(pickPos == "item_l", item_l, ifelse(pickPos == "item_r", item_r, ifelse(pickPos=="item_m", item_m, NA))),
correct_item = ifelse(pick == correctItem, 1, 0))
write.csv(data, file="../data/pilot.data.csv")
# data <- read_csv(file="../data/pilot.data.csv")
data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item))
data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item)) %>%
filter(correct > 0.83)
data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item)) %>%
filter(correct < 0.83)
data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item)) %>%
filter(correct < 0.83) %>%
pull(workerid)
drop <- data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item)) %>%
filter(correct < 0.83) %>%
pull(workerid)
data <- data %>%
filter(!workerid %in% drop)
data
data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item))
plot1 <- data %>%
filter(phase == 'test') %>%
group_by(distribution, workerid) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid) %>%
group_by(distribution, item) %>%
multi_boot_standard(col = "prop_correct")
ggplot(plot1,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
#geom_linerange(ymin = ci_lower, ymax = ci_upper) +
facet_grid(~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
plot1 <- data %>%
filter(phase == 'test') %>%
group_by(distribution, workerid) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid) %>%
group_by(distribution, item) %>%
multi_boot_standard(col = "prop_correct")
plot1 <- data %>%
filter(phase == 'test')
plot1
?substring
data <- raw_data %>%
mutate(correct_target3 = ifelse(correct_target1 == 0 & correct_target2 == 0, 1, 0)) %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)")),
pick = ifelse(pickPos == "item_l", item_l, ifelse(pickPos == "item_r", item_r, ifelse(pickPos=="item_m", item_m, NA))),
correct_item = ifelse(pick == correctItem, 1, 0),
pickTest = substr(pick, 3, length(pick))
correct_target1 = ifelse(correct))
data <- raw_data %>%
mutate(correct_target3 = ifelse(correct_target1 == 0 & correct_target2 == 0, 1, 0)) %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)")),
pick = ifelse(pickPos == "item_l", item_l, ifelse(pickPos == "item_r", item_r, ifelse(pickPos=="item_m", item_m, NA))),
correct_item = ifelse(pick == correctItem, 1, 0),
pickTest = substr(pick, 3, length(pick)))
data
data <- raw_data %>%
mutate(correct_target3 = ifelse(correct_target1 == 0 & correct_target2 == 0, 1, 0)) %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)")),
pick = ifelse(pickPos == "item_l", item_l, ifelse(pickPos == "item_r", item_r, ifelse(pickPos=="item_m", item_m, NA))),
correct_item = ifelse(pick == correctItem, 1, 0),
pickTest = substr(pick, 4, length(pick)))
data
data <- raw_data %>%
mutate(correct_target3 = ifelse(correct_target1 == 0 & correct_target2 == 0, 1, 0)) %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)")),
pick = ifelse(pickPos == "item_l", item_l, ifelse(pickPos == "item_r", item_r, ifelse(pickPos=="item_m", item_m, NA))),
correct_item = ifelse(pick == correctItem, 1, 0),
pickTest = substr(pick, 4, length(pick)),
correct_target1 = ifelse(pickTest == target1, 1, 0),
correct_target2 = ifelse(pickTest == target2, 1, 0),
correct_target3 = ifelse(pickTest == target3, 1, 0))
data
data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item))
drop <- data %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item)) %>%
filter(correct < 0.83) %>%
pull(workerid)
data <- data %>%
filter(!workerid %in% drop)
plot1 <- data %>%
filter(phase == 'test') %>%
group_by(distribution, workerid) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid) %>%
group_by(distribution, item) %>%
multi_boot_standard(col = "prop_correct")
ggplot(plot1,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
#geom_linerange(ymin = ci_lower, ymax = ci_upper) +
facet_grid(~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
plot2 <- data %>%
filter(phase == 'test') %>%
group_by(distribution, workerid, trialType) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid, -trialType) %>%
group_by(distribution, trialType, item) %>%
multi_boot_standard(col = "prop_correct")
ggplot(plot2,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
#geom_linerange(ymin = ci_lower, ymax = ci_upper) +
facet_grid(trialType~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
ggplot(plot2,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
geom_linerange(ymin = ci_lower, ymax = ci_upper) +
facet_grid(trialType~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
plot2 <- data %>%
filter(phase == 'test') %>%
group_by(distribution, workerid, trialType) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid, -trialType) %>%
group_by(distribution, trialType, item) %>%
multi_boot_standard(col = "prop_correct")
ggplot(plot2,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
geom_linerange(ymin = ci_lower, ymax = ci_upper) +
facet_grid(trialType~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
plot1 <- data %>%
filter(phase == 'test') %>%
group_by(distribution, workerid) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid) %>%
group_by(distribution, item) %>%
multi_boot_standard(col = "prop_correct")
ggplot(plot1,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
geom_linerange(ymin = ci_lower, ymax = ci_upper) +
facet_grid(~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
plot1
ggplot(plot1,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
facet_grid(~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
ggplot(plot2,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
facet_grid(trialType~distribution) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few()
plot3 <- data %>%
group_by(workerid, trial) %>%
summarise(testPick = pickTest)
plot3 <- data %>%
group_by(workerid, trial) %>%
mutate(testPick = pickCat)
plot3
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
group_by(workerid, trial) %>%
f(testPick = pickCat)
plot3 <- data %>%
filter(slide == 6 | slide == "choice")
plot3
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
select(workerid, trial, pick, pickCat, correct_target1)
plot3
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
select(workerid, trial, pick, pickTest, correct_target1)
plot3
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
select(workerid, trial, pick, correct_target1)
plot3
?spread
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
select(workerid, trial, pick, correct_target1) %>%
spread(pick, correct_target1)
plot3
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
select(workerid, trial, pick, correct_target1)
plot3
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
select(workerid, trial, pick, correct_target1) %>%
spread(trial, correct_target1)
plot3
plot3 <- data %>%
filter(slide == 6 | slide == "choice") %>%
select(workerid, trial, pick, correct_target1)
plot3
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, pick, correct_target1)
c <- left_join(a, b)
c
b <- data %>%
filter(slide == "choice") %>%
select(workerid, pickTest, correct_target1)
c <- left_join(a, b)
c
a
b
a$pickTest = b$pickTest
a
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, pickTest, correct_target1)
b$pick = a$
spread(trial, correct_target1)
b$pick = a$pick
b
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, pickTest, correct_target1)
b$pickSlide6 = a$pick
b
b %>%
filter(correct_target1 == 1)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1)
b$pickSlide6 = a$pick
b %>%
filter(correct_target1 == 1)
b %>%
filter(distribution != "c(6, 0, 0)")
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
data %>%
group_by(pickTest)
data %>%
group_by(pickCat)
data %>%
group_by(pickTest) %>%
summarise()
data %>%
filter(phase == "test") %>%
group_by(pickTest) %>%
summarise()
data %>%
filter(phase == "test") %>%
group_by(pickTest) %>%
summarise(mean = mean(correct_target1))
data %>%
filter(phase == "test") %>%
group_by(pickTest, distribution) %>%
summarise(mean = mean(correct_target1))
data %>%
filter(phase == "test", distribution == "c(6, 0, 0)") %>%
group_by(pickTest) %>%
summarise(mean = mean(correct_target1))
data %>%
filter(phase == "test", distribution == "c(4, 2, 0)") %>%
group_by(pickTest) %>%
summarise(mean = mean(correct_target1))
data %>%
filter(phase == "test", distribution == "c(6, 0, 0)") %>%
group_by(pickTest) %>%
summarise(mean = mean(correct_target1))
data %>%
filter(phase == "test", distribution == "c(4, 2, 0)") %>%
group_by(pickTest) %>%
summarise(mean = mean(correct_target1))
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1)
b$pickSlide6 = a$pick
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1) %>%
group_by(distribution)
b$pickSlide6 = a$pick
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
b
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1) %>%
group_by(distribution)
b$pickSlide6 = a$pick
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
b
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1) %>%
group_by(distribution)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1)
b$pickSlide6 = a$pick
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1) %>%
group_by(distribution)
b
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1) %>%
# 30/59 trials picking the same category as the last input slide.
b
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1)
b$pickSlide6 = a$pick
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
b
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1)
b$pickSlide6 = a$pick
b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
# 30/59 trials picking the same category as the last input slide.
b
b <- b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1)
?sort
?reorder
b <- b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1) %>%
reorder()
a <- data %>%
filter(slide == 6) %>%
select(workerid, pick)
b <- data %>%
filter(slide == "choice") %>%
select(workerid, distribution, pickTest, correct_target1)
b$pickSlide6 = a$pick
b <- b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1) %>%
reorder()
b <- b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1) %>%
arrange(distribution)
b
b <- b %>%
filter(distribution != "c(6, 0, 0)", correct_target1 == 1) %>%
arrange(distribution) %>%
group_by(distribution) %>%
summarise(n = length(distribution))
b
