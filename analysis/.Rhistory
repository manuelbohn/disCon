theme_few() +
ylim(-0.05,1.05)+
guides(alpha = F)+
theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())
plot3 <- data %>%
filter(phase == "test", distribution != "c(6, 0, 0)") %>%
group_by (distribution, workerid, experiment) %>%
summarise (lastInput = mean(same_lastInput),
n = n()) %>%
group_by(distribution, experiment) %>%
multi_boot_standard(col = "lastInput")
plot3 <- data_recency %>%
filter(phase == "test", distribution != "c(6, 0, 0)") %>%
group_by (distribution, workerid, experiment) %>%
summarise (lastInput = mean(same_lastInput),
n = n()) %>%
group_by(distribution, experiment) %>%
multi_boot_standard(col = "lastInput")
ggplot(plot3,
aes(x = distribution, y = mean, fill = distribution)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
facet_grid(~experiment,
labeller = as_labeller(c(recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
labs(x="", y= "proportion chosen same as last item")
plot3 <- data_recency %>%
filter(phase == "test", distribution != "c(6, 0, 0)") %>%
group_by (distribution, workerid, experiment) %>%
summarise (lastInput = mean(same_lastInput),
n = n()) %>%
group_by(distribution, experiment) %>%
multi_boot_standard(col = "lastInput")
ggplot(plot3,
aes(x = distribution, y = mean, fill = distribution)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
scale_fill_solarized(name = "Distribution",
breaks = c("c(5, 1, 0)", "c(2, 2, 2)"),
labels = c("(5-1-0)", "(2-2-2)"))+
facet_grid(~experiment,
labeller = as_labeller(c(recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
labs(x="", y= "proportion chosen same as last item")
plot3 <- data_recency %>%
filter(phase == "test", distribution != "c(6, 0, 0)") %>%
group_by (distribution, workerid, experiment) %>%
summarise (lastInput = mean(same_lastInput),
n = n()) %>%
group_by(distribution, experiment) %>%
multi_boot_standard(col = "lastInput")
ggplot(plot3,
aes(x = distribution, y = mean, fill = distribution)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
scale_fill_solarized(name = "Distribution",
breaks = c("c(5, 1, 0)", "c(2, 2, 2)"),
labels = c("(5-1-0)", "(2-2-2)"))+
facet_grid(~experiment,
labeller = as_labeller(c(recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
theme(axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
labs(x="", y= "proportion chosen same as last item")
plot3 <- data_recency %>%
filter(phase == "test", distribution != "c(6, 0, 0)") %>%
group_by (distribution, workerid, experiment) %>%
summarise (lastInput = mean(same_lastInput),
n = n()) %>%
group_by(distribution, experiment) %>%
multi_boot_standard(col = "lastInput")
ggplot(plot3,
aes(x = distribution, y = mean, fill = distribution)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
scale_fill_solarized(name = "Distribution",
breaks = c("c(5, 1, 0)", "c(2, 2, 2)"),
labels = c("(5-1-0)", "(2-2-2)"))+
facet_grid(~experiment,
labeller = as_labeller(c(recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
theme(axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
labs(x="", y= "proportion chosen same as last item")
#Libraries
knitr::opts_chunk$set(echo = FALSE, warning = FALSE) #no code, no warning printed
library(knitr)
library(tidyverse)
library(ggplot2)
library(jsonlite)
library(tidyr)
library(stringr)
library(dplyr)
library(ggthemes)
library(langcog)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
#Pilot data preprocessing
files <- dir("../../pilot_1_raw_data/production-results")
raw_data <- data_frame()
for (f in files) {
jf <- paste("../../pilot_1_raw_data/production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- as_data_frame(jd$answers$data$data) %>%
mutate(workerid = jd$WorkerId)
raw_data <- bind_rows(raw_data, id)
}
data_pilot_another <- raw_data %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)")))
#Recency "Here's another one" data preprocessing
files <- dir("../../recency_raw_data/production-results")
raw_data <- data_frame()
for (f in files) {
jf <- paste("../../recency_raw_data/production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- as_data_frame(jd$answers$data$data) %>%
mutate(workerid = jd$WorkerId)
raw_data <- bind_rows(raw_data, id)
}
data_recency_another <- raw_data %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(5, 1, 0)", "c(2, 2, 2)")))
data_ip <- data_recency_another %>%
filter(phase == 'training') %>%
group_by(workerIp) %>%
summarise(correct = mean(correct_item))
data_recency_another <- data_recency_another %>%
distinct(workerIp, trial, slide, .keep_all = TRUE)
#Recency "Here's the last one." data preprocessing
files <- dir("../../recency_last_raw_data/production-results")
raw_data <- data_frame()
for (f in files) {
jf <- paste("../../recency_last_raw_data/production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- as_data_frame(jd$answers$data$data) %>%
mutate(workerid = jd$WorkerId)
raw_data <- bind_rows(raw_data, id)
}
data_recency_last <- raw_data %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(5, 1, 0)", "c(2, 2, 2)")))
data_ip <- data_recency_last %>%
filter(phase == 'training') %>%
group_by(workerIp) %>%
summarise(correct = mean(correct_item))
data_recency_last <- data_recency_last %>%
distinct(workerIp, trial, slide, .keep_all = TRUE)
#Recency look data preprocessing
files <- dir("../../recency_look_raw_data/production-results")
raw_data <- data_frame()
for (f in files) {
jf <- paste("../../recency_look_raw_data/production-results/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- as_data_frame(jd$answers$data$data) %>%
mutate(workerid = jd$WorkerId)
raw_data <- bind_rows(raw_data, id)
}
data_recency_look <- raw_data %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(5, 1, 0)", "c(2, 2, 2)")))
data_ip <- data_recency_look %>%
filter(phase == 'training') %>%
group_by(workerIp) %>%
summarise(correct = mean(correct_item))
data_recency_look <- data_recency_look %>%
distinct(workerIp, trial, slide, .keep_all = TRUE)
#Combine recency data
data_recency <- bind_rows(data_recency_another, data_recency_last, data_recency_look)
#remove duplicated ips and workers who do not pass the training threshold
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
# Training threshold check for data_pilot_another
data_pilot_another %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item))
drop <- data_pilot_another %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item)) %>%
filter(correct < 0.83) %>%
pull(workerid)
data_pilot_another <- data_pilot_another %>%
filter(!workerid %in% drop)
# IP check for data_recency
data_recency <- data_recency %>%
distinct(workerIp, trial, slide, .keep_all = TRUE)
# Training threshold check for data_recency
data_recency %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item))
drop <- data_recency %>%
filter(phase == 'training') %>%
group_by(workerid) %>%
summarise(correct = mean(correct_item)) %>%
filter(correct < 0.83) %>%
pull(workerid)
data_recency <- data_recency %>%
filter(!workerid %in% drop)
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_pilot_another %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
summarise(n = n()) %>%
kable()
plot1 <- data_pilot_another %>%
filter(phase == 'test') %>%
group_by(distribution, workerid) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid) %>%
group_by(distribution, item) %>%
multi_boot_standard(col = "prop_correct")
ggplot(plot1,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
scale_fill_solarized(name = "Chosen item",
breaks = c("correct", "correct2", "correct3"),
labels = c("most frequent", "second most frequent", "least frequent"))+
facet_grid(~distribution,
labeller = as_labeller(c(`c(6, 0, 0)` = "Distribution\n(6-0-0)", `c(4, 2, 0)` = "Distribution\n(4-2-0)", `c(2, 2, 2)` = "Distribution\n(2-2-2)"))) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
theme(axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
labs(x="", y= "proportion chosen")
plot2 <- data_pilot_another %>%
filter(phase == "test", distribution != "c(6, 0, 0)") %>%
group_by (distribution, workerid) %>%
summarise (lastInput = mean(same_lastInput),
n = n()) %>%
multi_boot_standard(col = "lastInput")
ggplot(plot2,
aes(x = distribution, y = mean, fill = distribution)) +
geom_bar(stat='identity', width = 0.3) +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
scale_fill_solarized(name = "Distribution",
breaks = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)"),
labels = c("(6-0-0)", "(4-2-0)", "(2-2-2)"))+
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
theme(axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
labs(x="", y= "proportion chosen same as last item")
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
summarise(n = n()) %>%
kable()
plot1 <- data_recency %>%
filter(phase == 'test', distribution == "c(5, 1, 0)") %>%
group_by(distribution, workerid, experiment) %>%
summarise(correct = mean(correct_target1),
correct2 = mean(correct_target2),
correct3 = mean(correct_target3)) %>%
gather(item, prop_correct, -distribution, -workerid, -experiment) %>%
group_by(distribution, item, experiment) %>%
multi_boot_standard(col = "prop_correct")
ggplot(plot1,
aes(x = item, y=mean, fill=item)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
scale_fill_solarized(name = "Chosen item",
breaks = c("correct", "correct2", "correct3"),
labels = c("most frequent", "second most frequent", "least frequent"))+
facet_grid(~experiment,
labeller = as_labeller(c(`c(5, 1, 0)` = "Distribution\n(5-1-0)", `c(2, 2, 2)` = "Distribution\n(2-2-2)", recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that."))) +
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
theme(axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
labs(x="", y= "proportion chosen")
# plot2 <- data_recency %>%
#   filter(phase == 'test') %>%
#   group_by(distribution, workerid, experiment) %>%
#   summarise(correct = mean(correct_target1),
#             correct2 = mean(correct_target2),
#             correct3 = mean(correct_target3)) %>%
#   gather(item, prop_correct, -distribution, -workerid, -experiment) %>%
#   group_by(distribution, item, experiment)
#
# plot2a <- plot2 %>%
#   multi_boot_standard(col = "prop_correct")
#
# ggplot() +
#   geom_jitter(data = plot2, aes(x = item, y = prop_correct, col = item, alpha = .2), width = .3,height = .025)+
#   geom_pointrange(data = plot2a, aes(x = item, y = mean, col = item, ymin = ci_lower, ymax = ci_upper),size = .8)+
#   scale_colour_solarized(name = "Chosen item",
#                        breaks = c("correct", "correct2", "correct3"),
#                        labels = c("most frequent", "second most frequent", "least frequent"))+
#   facet_grid(experiment~distribution,
#              labeller = as_labeller(c(`c(5, 1, 0)` = "Distribution\n(5-1-0)", `c(2, 2, 2)` = "Distribution\n(2-2-2)", recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
#   geom_hline(yintercept = 1/3, lty=2)+
#   labs(x="Item Chosen", y="Proportion Chosen")+
#   theme_few() +
#   ylim(-0.05,1.05)+
#   guides(alpha = F)+
#   theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())
plot3 <- data_recency %>%
filter(phase == "test", distribution != "c(6, 0, 0)") %>%
group_by (distribution, workerid, experiment) %>%
summarise (lastInput = mean(same_lastInput),
n = n()) %>%
group_by(distribution, experiment) %>%
multi_boot_standard(col = "lastInput")
ggplot(plot3,
aes(x = distribution, y = mean, fill = distribution)) +
geom_bar(stat='identity') +
geom_linerange(aes(ymin = ci_lower, ymax = ci_upper)) +
scale_fill_solarized(name = "Distribution",
breaks = c("c(5, 1, 0)", "c(2, 2, 2)"),
labels = c("(5-1-0)", "(2-2-2)"))+
facet_grid(~experiment,
labeller = as_labeller(c(recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
geom_hline(yintercept = 1/3, lty=2) +
ylim(0, 1) +
theme_few() +
theme(axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
labs(x="", y= "proportion chosen same as last item")
# plot2 <- data_recency %>%
#   filter(phase == 'test') %>%
#   group_by(distribution, workerid, experiment) %>%
#   summarise(correct = mean(correct_target1),
#             correct2 = mean(correct_target2),
#             correct3 = mean(correct_target3)) %>%
#   gather(item, prop_correct, -distribution, -workerid, -experiment) %>%
#   group_by(distribution, item, experiment)
#
# plot2a <- plot2 %>%
#   multi_boot_standard(col = "prop_correct")
#
# ggplot() +
#   geom_jitter(data = plot2, aes(x = item, y = prop_correct, col = item, alpha = .2), width = .3,height = .025)+
#   geom_pointrange(data = plot2a, aes(x = item, y = mean, col = item, ymin = ci_lower, ymax = ci_upper),size = .8)+
#   scale_colour_solarized(name = "Chosen item",
#                        breaks = c("correct", "correct2", "correct3"),
#                        labels = c("most frequent", "second most frequent", "least frequent"))+
#   facet_grid(experiment~distribution,
#              labeller = as_labeller(c(`c(5, 1, 0)` = "Distribution\n(5-1-0)", `c(2, 2, 2)` = "Distribution\n(2-2-2)", recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
#   geom_hline(yintercept = 1/3, lty=2)+
#   labs(x="Item Chosen", y="Proportion Chosen")+
#   theme_few() +
#   ylim(-0.05,1.05)+
#   guides(alpha = F)+
#   theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())
# plot2 <- data_recency %>%
#   filter(phase == 'test') %>%
#   group_by(distribution, workerid, experiment) %>%
#   summarise(correct = mean(correct_target1),
#             correct2 = mean(correct_target2),
#             correct3 = mean(correct_target3)) %>%
#   gather(item, prop_correct, -distribution, -workerid, -experiment) %>%
#   group_by(distribution, item, experiment)
#
# plot2a <- plot2 %>%
#   multi_boot_standard(col = "prop_correct")
#
# ggplot() +
#   geom_jitter(data = plot2, aes(x = item, y = prop_correct, col = item, alpha = .2), width = .3,height = .025)+
#   geom_pointrange(data = plot2a, aes(x = item, y = mean, col = item, ymin = ci_lower, ymax = ci_upper),size = .8)+
#   scale_colour_solarized(name = "Chosen item",
#                        breaks = c("correct", "correct2", "correct3"),
#                        labels = c("most frequent", "second most frequent", "least frequent"))+
#   facet_grid(experiment~distribution,
#              labeller = as_labeller(c(`c(5, 1, 0)` = "Distribution\n(5-1-0)", `c(2, 2, 2)` = "Distribution\n(2-2-2)", recency = "Here's another one.", recency_last = "Here's the last one.", recency_look = "Look at that.")))+
#   geom_hline(yintercept = 1/3, lty=2)+
#   labs(x="Item Chosen", y="Proportion Chosen")+
#   theme_few() +
#   ylim(-0.05,1.05)+
#   guides(alpha = F)+
#   theme(axis.text.x=element_blank(),axis.ticks.x=element_blank())
sample_size %>%
group_by(experiment) %>%
summarise(n = n()) %>%
kable()
sample_size %>%
mutate(experiment = casewhen(experiment == "recency" ~ "another one",
experiment == "recency_last" ~ "last one",
experiment == "recency_look" ~ "look at that")) %>%
group_by(experiment) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment = casewhen(experiment == "recency" ~ "another one",
experiment == "recency_last" ~ "last one",
experiment == "recency_look" ~ "look at that")) %>%
group_by(experiment) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment = case_when(experiment == "recency" ~ "another one",
experiment == "recency_last" ~ "last one",
experiment == "recency_look" ~ "look at that")) %>%
group_by(experiment) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
# mutate(experiment = case_when(experiment == "recency" ~ "another one",
#                              experiment == "recency_last" ~ "last one",
#                              experiment == "recency_look" ~ "look at that")) %>%
group_by(experiment) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment = case_when(experiment == "recency" ~ "another one",
experiment == "recency_last" ~ "last one",
experiment == "recency_look" ~ "look at that")) %>%
group_by(experiment) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment2 = case_when(experiment == "recency" ~ "another one",
experiment == "recency_last" ~ "last one",
experiment == "recency_look" ~ "look at that")) %>%
group_by(experiment2) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment2 = case_when(experiment == "recency" ~ `another one`,
experiment == "recency_last" ~ `last one`,
experiment == "recency_look" ~ `look at that`)) %>%
group_by(experiment2) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment2 = case_when(experiment == "recency" ~ another one,
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment2 = ifelse(experiment == "recency", "another one", ifelse(experiment == "recency_last", "last one", "look at that")) %>%
group_by(experiment2) %>%
summarise(n = n()) %>%
kable()
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment2 = ifelse(experiment == "recency", "another one", ifelse(experiment == "recency_last", "last one", "look at that"))) %>%
group_by(experiment2) %>%
summarise(n = n()) %>%
kable()
data_recency
unique(sample_size$experiment)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
unique(sample_size$experiment)
# summarise all unique ips across 3 experiments (do this after general description of task)
sample_size <- data_recency %>%
distinct(workerid, .keep_all = TRUE)
sample_size %>%
mutate(experiment2 = ifelse(experiment == "recency", "another one", ifelse(experiment == "recency_last ", "last one", "look at that"))) %>%
group_by(experiment2) %>%
summarise(n = n()) %>%
kable()
sample_size %>%
mutate(wording = ifelse(experiment == "recency", "another one", ifelse(experiment == "recency_last ", "last one", "look at that"))) %>%
group_by(wording) %>%
summarise(n = n()) %>%
kable()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(jsonlite)
library(tidyr)
library(stringr)
library(dplyr)
library(ggthemes)
library(langcog)
files <- dir("../data/kids_pilot/")
raw_data <- data_frame()
for (f in files) {
jf <- paste("../data/kids_pilot/",f,sep="")
jd <- fromJSON(paste(readLines(jf), collapse=""))
id <- as_data_frame(jd$data$data)
# mutate(workerid = jd$WorkerId)
raw_data <- bind_rows(raw_data, id)
}
data <- raw_data %>%
mutate(distribution = as.character(distribution),
distribution = factor(distribution, levels = c("c(6, 0, 0)", "c(4, 2, 0)", "c(2, 2, 2)")))
data
